<!doctype html>
<html lang="ja">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Cultural Festival Food Bazaar Menu</title>
  <meta name="description" content="文化祭の食品バザー メニュー一覧（写真つき）" />
  <style>
    :root{
      --bg:#f6f7fb;        /* 背景 */
      --card:#ffffff;      /* カード */
      --ink:#0f172a;       /* 文字 */
      --muted:#64748b;     /* 補助文字 */
      --accent:#16a34a;    /* アクセント（緑）*/
      --accent-weak:#dcfce7;
      --shadow:0 6px 18px rgba(16,24,40,.08);
      --radius:18px;
    }
    html,body{height:100%}
    body{margin:0; background:var(--bg); color:var(--ink); font-family: system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", "Noto Sans JP", "Hiragino Kaku Gothic ProN", "Yu Gothic", Arial, sans-serif; -webkit-font-smoothing:antialiased; line-height:1.6;}
    header{position:sticky; top:0; z-index:20; background:linear-gradient(180deg,#ffffff 0%, rgba(255,255,255,.9) 70%, rgba(255,255,255,0) 100%); backdrop-filter:saturate(1.2) blur(6px); border-bottom:1px solid rgba(0,0,0,.04);}
    .wrap{max-width:1100px; margin:0 auto; padding:20px;}
    .hero{display:flex; align-items:center; gap:12px;}
    .dot{width:14px; height:14px; border-radius:50%; background:var(--accent); box-shadow:0 0 0 6px var(--accent-weak);} 
    h1{font-size:clamp(22px,3.5vw,32px); margin:0;}
    .badge{display:inline-flex; align-items:center; gap:6px; padding:6px 10px; background:var(--accent-weak); color:#065f46; border-radius:999px; font-size:12px; margin-left:auto}

    main{padding:10px 20px 48px}
    .grid{max-width:1100px; margin:0 auto; display:grid; grid-template-columns:repeat(auto-fit, minmax(240px, 1fr)); gap:18px}

    .card{background:var(--card); border-radius:var(--radius); overflow:hidden; box-shadow:var(--shadow); border:1px solid rgba(0,0,0,.06); display:flex; flex-direction:column;}
    .thumb{position:relative; aspect-ratio:4/3; background:#eef2ff; overflow:hidden; cursor:pointer}
    .thumb img{width:100%; height:100%; object-fit:cover; display:block;}
    .thumb:focus{outline:2px solid var(--accent); outline-offset:2px}

    .overlay{position:absolute; inset:0; display:none; align-items:center; justify-content:center; background:rgba(15,23,42,.6); color:#fff; padding:14px; text-align:center}
    .thumb.show .overlay{display:flex}
    .ov-body{max-width:90%; max-height:70vh; overflow:auto}
    .ov-team{opacity:.85; font-size:12px; margin-bottom:4px}
    .ov-name{font-weight:800; font-size:20px; line-height:1.2}
    .ov-price{font-weight:900; font-size:18px; margin-top:6px}
    .ov-note{opacity:.9; font-size:12px; margin-top:4px}
    .ov-desc{opacity:.95; font-size:13px; margin-top:6px; line-height:1.55; white-space:pre-line}
    .ov-hint{opacity:.8; font-size:11px; margin-top:8px}

    .soldout{position:absolute; inset:auto 10px 10px auto; background:#ef4444; color:#fff; font-weight:700; padding:6px 10px; border-radius:999px; font-size:12px; box-shadow:0 6px 14px rgba(239,68,68,.25)}

    .body{padding:14px 14px 16px; display:grid; grid-template-columns:1fr auto; align-items:start; gap:6px 10px}
    .team{grid-column:1 / -1; color:var(--muted); font-size:12px}
    .name{font-weight:700; font-size:18px}
    .price{font-weight:800; font-size:18px; color:#065f46;}
    .note{grid-column:1 / -1; font-size:12px; color:var(--muted)}

    footer{max-width:1100px; margin:16px auto 44px; color:var(--muted); font-size:12px; text-align:center}

    /* details 折りたたみ（はじめに） */
    details.accordion{margin-top:10px; background:#fff; border:1px solid rgba(0,0,0,.06); border-radius:12px; box-shadow:var(--shadow);} 
    details.accordion > summary{cursor:pointer; list-style:none; padding:10px 14px; font-weight:700;}
    details.accordion > summary::-webkit-details-marker{display:none}
    details.accordion .acc-body{padding:0 14px 12px; color:#334155; font-size:14px;}
    details.accordion[open] > summary{border-bottom:1px solid rgba(0,0,0,.06);} 
  </style>
</head>
<body>
  <header>
    <div class="wrap">
      <div class="hero" style="gap:12px; align-items:flex-start;">
        <span class="dot" aria-hidden="true"></span>
        <div style="flex:1 1 auto; min-width:0;">
          <h1 style="margin-bottom:6px;">Cultural Festival Food Bazaar Menu</h1>
          <details class="accordion">
            <summary>はじめに</summary>
            <div class="acc-body">毎年食品バザーにお越しいただきありがとうございます。このメニューページは現在予定されているメニューの掲載となります。現在、画像はイメージとなっています。当日までに分量や値段・盛り付け等の変更がある場合があります。随時更新予定です。最新の情報となっていない場合はご容赦下さい。また、当日は材料の仕入れの関係により想定より早く売り切れてしまい販売ができない場合があります。その場合は後日返金可となっているのでチケットの返金にお越しください。</div>
          </details>
        </div>
        <span class="badge" id="countBadge">—</span>
      </div>
    </div>
  </header>

  <main>
    <div class="grid" id="grid" aria-live="polite"></div>
  </main>

  <footer>
    最終更新：<span id="updated"></span>　|　© 文化祭実行委員会
  </footer>

  <script>
  (function(){
    // ====== データ（ここだけ編集すればOK！）======
    var ITEMS = [
      { team: "1A", name: "焼うどん",       price: 100, img: "img/1a.png", soldOut:false, note:"予定：200食",       desc:"今日はきっと寒いですね！あったかい焼うどんはいかがですか！※画像は試食段階のもので、本番とは違う可能性があります。" },
      { team: "1B", name: "たません",     price: 100, img: "img/1b.png", soldOut:false, note:"予定：200食",    desc:"おいしいたこせんで卵を挟んだたませんです！ソースとマヨネーズがやみつきに！※画像は試食段階のもので、本番とは違う可能性があります。" },
      { team: "2A", name: "スパゲティ・大学芋",       price: 100, img: "img/2a.png", soldOut:false, note:"予定：各200食",desc:"ネパール風のスパゲティは日本人向けに味をアレンジ。大学芋は小さめのデザートとしてどうぞ！※画像は試食段階のもので、本番とは違う可能性があります。" },
      { team: "2B", name: "ポップコーン", price: 100, img: "img/2b.png", soldOut:false, note:"予定：200食",  desc:"ポップコーンを自分の好きなフレーバーで召し上がれ！※画像は試食段階のもので、本番とは違う可能性があります。" },
      { team: "3A", name: "おでん",   price: 100, img: "img/3a.png", soldOut:false, note:"予定：200食",desc:"寒くなってきたこの季節に温まるおでんをどうぞ。具材はお好みで３種です！※画像は試食段階のもので、本番とは違う可能性があります。" },
      { team: "4A", name: "タコス・チュロス",       price: 100, img: "img/4a.png", soldOut:false, note:"予定：200食",       desc:"トルティーヤに包んだタコスをほおばってください！おいしいよ！※画像は試食段階のもので、本番とは違う可能性があります。。" }
    ];
    // ============================================

    var grid  = document.getElementById('grid');
    var badge = document.getElementById('countBadge');

    function yen(n){ return '¥' + Number(n).toLocaleString('ja-JP'); }
    function el(tag, attrs, children){
      var e = document.createElement(tag);
      if (attrs) for (var k in attrs) e.setAttribute(k, attrs[k]);
      if (children) for (var i=0;i<children.length;i++) e.appendChild(children[i]);
      return e;
    }
    function txt(s){ return document.createTextNode(s); }

    function escapeHtml(s){
      return String(s).replace(/[&<>"']/g, function(c){
        return ({'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;','\'':'&#39;'}[c]);
      });
    }

    function cardHTML(item){
      var alt = escapeHtml(item.name + '（' + item.team + '）');
      var noteOverlay = item.note ? '<div class="ov-note">'+ escapeHtml(item.note) +'</div>' : '';
      var noteBody    = item.note ? '<div class="note">'+ escapeHtml(item.note) +'</div>' : '';
      return ''+
        '<article class="card" role="article">'+
          '<div class="thumb" tabindex="0" role="button" aria-label="'+ alt +'の説明を表示" aria-expanded="false">'+
            // onerror 内の style 引用符は &quot; で安全化
            '<img src="'+ item.img +'" alt="'+ alt +'" onerror="this.style.display=\'none\'; this.parentElement.style.display=\'grid\'; this.parentElement.style.placeItems=\'center\'; this.parentElement.innerHTML=\'<div style=&quot;color:#64748b; font-size:13px;&quot;>画像がありません</div>\'">'+
            (item.soldOut ? '<div class="soldout" aria-label="売り切れ">SOLD OUT</div>' : '')+
            '<div class="overlay">'+
              '<div class="ov-body">'+
                '<div class="ov-team">'+ escapeHtml(item.team) +'</div>'+
                '<div class="ov-name">'+ escapeHtml(item.name) +'</div>'+
                '<div class="ov-desc">'+ escapeHtml(item.desc) +'</div>'+
                '<div class="ov-price">'+ yen(item.price) +'</div>'+ noteOverlay +
                '<div class="ov-hint" style="opacity:.8; font-size:11px; margin-top:8px;">タップでもう一度閉じる</div>'+ 
              '</div>'+ 
            '</div>'+ 
          '</div>'+ 
          '<div class="body">'+
            '<div class="team">'+ escapeHtml(item.team) +'</div>'+ 
            '<div class="name">'+ escapeHtml(item.name) +'</div>'+ 
            '<div class="price">'+ yen(item.price) +'</div>'+ 
            noteBody +
          '</div>'+ 
        '</article>';
    }

    function bindThumbToggles(){
      var thumbs = document.querySelectorAll('.thumb');
      thumbs.forEach(function(el){
        function toggle(){
          var isOpen = el.classList.toggle('show');
          el.setAttribute('aria-expanded', isOpen ? 'true' : 'false');
        }
        el.addEventListener('click', toggle);
        el.addEventListener('keydown', function(e){
          if(e.key === 'Enter' || e.key === ' '){ e.preventDefault(); toggle(); }
        });
      });
    }

    function render(list){
      grid.innerHTML = list.map(cardHTML).join('');
      if (badge){ badge.textContent = list.length + ' 件表示中'; }
      bindThumbToggles();
    }

    try { render(ITEMS); }
    catch (e){
      grid.innerHTML = '<div style="padding:16px; background:#fff; border:1px solid #fee2e2; color:#b91c1c; border-radius:12px;">表示中にエラー：'+ (e && e.message ? escapeHtml(e.message) : '') +'</div>';
      console.error(e);
    }

    var updated = document.getElementById('updated');
    if (updated){ updated.textContent = new Date().toLocaleString('ja-JP'); }
  })();
  </script>
</body>
</html>
